---
interface Props {
  categories: string[];
  currentCategory?: string;
  basePath: string;
  allLabel?: string;
  paramName?: string;
}

const { categories, currentCategory, basePath, allLabel = 'All', paramName = 'category' } = Astro.props;

function getCategoryUrl(category?: string): string {
  if (!category) return basePath;
  return `${basePath}?${paramName}=${encodeURIComponent(category)}`;
}
---

<div class="flex flex-wrap items-center gap-2">
  <a
    href={getCategoryUrl()}
    class:list={[
      'filter-btn',
      !currentCategory
        ? 'bg-indigo-600 text-white'
        : 'filter-btn-inactive',
    ]}
  >
    {allLabel}
  </a>

  {categories.map((category) => (
    <a
      href={getCategoryUrl(category)}
      class:list={[
        'filter-btn',
        currentCategory === category
          ? 'bg-indigo-600 text-white'
          : 'filter-btn-inactive',
      ]}
    >
      {category}
    </a>
  ))}
</div>
