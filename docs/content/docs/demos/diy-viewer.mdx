---
title: DIY Viewer
description: A DIY tutorial viewer that extracts project guides from sites like Instructables
---

# DIY Viewer Demo

The DIY Viewer demonstrates how to extract complex, multi-step tutorial content using <Refyne />'s **async crawler API** via the official **@refyne/sdk**. It pulls tutorials from DIY sites like Instructables, including materials lists, step-by-step instructions, and measurement conversions.

<Callout type="info">
  Try it live at [diyviewer-demo.refyne.uk](https://diyviewer-demo.refyne.uk)
</Callout>

<Callout type="note">
  This demo uses the **async crawler pattern** - it starts a job, then polls for results. This is ideal for longer extractions where you want to show progress to users. See the [Recipe App](/docs/demos/recipe-app) for a simpler synchronous approach.
</Callout>

## Features

- **Tutorial Extraction**: Paste any DIY tutorial URL and extract structured data
- **Smart Filtering**: Automatically skips non-actionable steps (intros, conclusions, promotional content)
- **Glossary Generation**: Creates definitions for technical terms beginners might not understand
- **Measurement Conversions**: Automatically converts between metric and imperial units
- **Materials vs Tools**: Separates consumables from reusable equipment
- **Materials Checklist**: Track what you have for your project

## Schema Definition

The schema instructs <Refyne /> to intelligently extract and organize tutorial content:

<include lang="yaml">../../../../demos/diyviewer/src/lib/refyne.ts#tutorial-schema</include>

## API Integration

Install the official TypeScript SDK:

```bash
npm install @refyne/sdk
```

### Starting an Async Extraction Job

The `crawl()` method starts an async job and returns immediately with a job ID for polling:

<include lang="typescript">../../../../demos/diyviewer/src/lib/refyne.ts#start-extraction</include>

### Polling for Results

Poll the job status until extraction is complete:

<include lang="typescript">../../../../demos/diyviewer/src/lib/refyne.ts#get-job-status</include>

### Client-Side Polling Loop

The frontend polls the API and shows progress to users:

```typescript
async function pollForResults(jobId: string) {
  const maxAttempts = 300; // 5 minutes max
  let attempts = 0;

  const interval = setInterval(async () => {
    attempts++;
    if (attempts > maxAttempts) {
      clearInterval(interval);
      showError('Extraction timed out');
      return;
    }

    const response = await fetch(`/api/poll/${jobId}`);
    const result = await response.json();

    if (result.status === 'completed') {
      clearInterval(interval);
      showResults(result.data);
    } else if (result.status === 'failed') {
      clearInterval(interval);
      showError(result.error);
    }
    // Otherwise keep polling...
  }, 1000);
}
```

## Response Example

When extraction completes, you get structured data with glossary terms and measurement conversions:

```json
{
  "title": "Build a Simple Bookshelf",
  "overview": "Learn how to build a sturdy wooden bookshelf using basic tools...",
  "image_url": "https://example.com/bookshelf.jpg",
  "author": "DIY Workshop",
  "author_url": "https://example.com/author",
  "difficulty": "Beginner",
  "estimated_time": "4-6 hours",
  "glossary": [
    {
      "term": "miter cut",
      "definition": "An angled cut across the width of a board, typically at 45 degrees",
      "context": "Used for joining corners of the shelf frame"
    }
  ],
  "materials": [
    {
      "name": "Pine boards",
      "quantity": "4",
      "notes": "1x10 lumber",
      "measurement": {
        "original": "6 feet",
        "metric": "183 cm",
        "imperial": "6 ft"
      }
    }
  ],
  "tools": [
    {
      "name": "Circular saw",
      "notes": "Or hand saw",
      "required": true
    },
    {
      "name": "Clamps",
      "notes": "For holding pieces while drilling",
      "required": false
    }
  ],
  "steps": [
    {
      "step_number": 1,
      "title": "Cut the Side Panels",
      "instructions": "Measure and mark your pine boards at 36 inches...",
      "tips": "Clamp a straight edge as a guide for cleaner cuts",
      "image_urls": ["https://example.com/step1.jpg"],
      "measurements": [
        {
          "original": "36 inches",
          "metric": "91.4 cm",
          "imperial": "36 in"
        }
      ]
    }
  ],
  "tags": ["woodworking", "furniture", "beginner"]
}
```

## When to Use Async vs Sync

| Async Crawler (this demo) | Sync Extract (Recipe App) |
|---------------------------|---------------------------|
| Start job, poll for results | Single API call |
| Best for complex/long pages | Best for quick pages |
| Shows progress to users | Blocks until complete |
| Better timeout handling | Simpler error handling |

<Callout type="tip">
  Use the async crawler pattern when extracting from complex pages with lots of content, or when you want to show extraction progress to users.
</Callout>

## Tech Stack

- **[Astro](https://astro.build/)** - Static site generator with SSR support
- **[Cloudflare Pages](https://pages.cloudflare.com/)** - Hosting with edge functions
- **[Cloudflare D1](https://developers.cloudflare.com/d1/)** - SQLite database at the edge
- **[Tailwind CSS](https://tailwindcss.com/)** - Styling

## Source Code

The complete source code is available in the [refyne-demos](https://github.com/jmylchreest/refyne-demos) repository.

Key files:
- `diyviewer/src/lib/refyne.ts` - <Refyne /> SDK integration and schema
- `diyviewer/src/lib/db.ts` - Database operations
- `diyviewer/src/pages/add.astro` - Tutorial extraction page
- `diyviewer/src/pages/tutorial/[id].astro` - Tutorial detail page
- `diyviewer/src/pages/checklist.astro` - Materials checklist

## Try It Yourself

1. Visit [diyviewer-demo.refyne.uk](https://diyviewer-demo.refyne.uk)
2. Click "Add Project"
3. Paste a tutorial URL from [Instructables](https://www.instructables.com/) or [Make:](https://makezine.com/projects/)
4. Watch the extraction progress
5. Save to your project list and track materials with the checklist
