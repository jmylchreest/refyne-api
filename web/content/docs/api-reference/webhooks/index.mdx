---
title: "Webhooks"
description: "Create and manage webhook endpoints to receive real-time notifications for job events."
---

## List Webhooks

`GET /api/v1/webhooks`

Returns all webhooks for the authenticated user.

### Response

```json
{
  "webhooks": [
    {
      "id": "01HXYZ...",
      "name": "Production Notifications",
      "url": "https://your-server.com/webhook",
      "has_secret": true,
      "events": ["job.completed", "job.failed"],
      "headers": [],
      "is_active": true,
      "created_at": "2024-01-15T10:30:00Z",
      "updated_at": "2024-01-15T10:30:00Z"
    }
  ]
}
```

---

## Create Webhook

`POST /api/v1/webhooks`

Create a new webhook endpoint.

### Request Body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | string | Yes | Unique name for this webhook (max 64 chars) |
| `url` | string | Yes | Webhook URL to receive POST requests |
| `secret` | string | No | Secret for HMAC-SHA256 signature verification |
| `events` | string[] | No | Event types to subscribe to (default: `["*"]` for all) |
| `headers` | object[] | No | Custom headers to include (max 10) |
| `is_active` | boolean | Yes | Whether the webhook is active |

### Event Types

| Event | Description |
|-------|-------------|
| `*` | All events (wildcard) |
| `job.started` | Job has started processing |
| `job.completed` | Job completed successfully |
| `job.failed` | Job failed with an error |
| `job.progress` | Job progress update |

### Example Request

```bash
curl -X POST https://api.refyne.uk/api/v1/webhooks \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Production Notifications",
    "url": "https://your-server.com/webhook",
    "secret": "your-signing-secret",
    "events": ["job.completed", "job.failed"],
    "headers": [
      {"name": "X-Custom-Header", "value": "custom-value"}
    ],
    "is_active": true
  }'
```

### Response

```json
{
  "id": "01HXYZ...",
  "name": "Production Notifications",
  "url": "https://your-server.com/webhook",
  "has_secret": true,
  "events": ["job.completed", "job.failed"],
  "headers": [
    {"name": "X-Custom-Header", "value": "custom-value"}
  ],
  "is_active": true,
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
}
```

### Error Responses

| Status | Description |
|--------|-------------|
| 400 | Invalid request (missing required fields, invalid URL format) |
| 401 | Unauthorized (invalid or missing API key) |
| 409 | Conflict (webhook with this name already exists) |
